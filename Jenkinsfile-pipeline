pipeline {
  agent { label 'jenkins' }
    stages {
       stage ('git clone') {
         steps {
            git 'https://github.com/nanaji-git/onlinebookstore.git'
     }
  }
    stage ('build code') {
       steps{
          sh 'mvn clean install'
          }
          }
    
    stage ('sonar scan') {
       steps {
         withSonarQubeEnv('sonarqube') { 
           sh 'mvn sonar:sonar'
       }
     }  
    }
   stage ('artifact to nexus ')  {
      steps {
         nexusArtifactUploader artifacts: [[artifactId: 'onlinebookstore', classifier: '', file: 'onlinebookstore.war', type: 'war']], credentialsId: 'nexus', groupId: 'onlinebookstore', nexusUrl: '13.57.230.166:8085', nexusVersion: 'nexus2', protocol: 'http', repository: 'nexus-repo', version: '0.0.1-SNAPSHOT'
}
}
