pipeline {
  agent { label 'jenkins' }
    stages {
       stage ('git clone') {
         steps {
            git 'https://github.com/nanaji-git/onlinebookstore.git'
     }
  }
    stage ('build code') {
       steps{
          sh 'mvn clean install'
          }
          }
    post {
    always {
      junit(testResults: 'target/surefire-reports/*.xml', allowEmptyResults : true)
      }
      }
    stage ('sonar scan') {
       steps {
         withSonarQubeEnv('sonarqube') { 
           sh 'mvn sonar:sonar'
       }
     }  
    }
}
}
