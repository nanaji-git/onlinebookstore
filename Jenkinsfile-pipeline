pipeline {
  agent { label 'jenkins' }
    stages {
       stage ('git clone') {
         steps {
            git 'https://github.com/nanaji-git/onlinebookstore.git'
     }
  }
    stage ('build code') {
       steps{
          sh 'mvn clean install'
          }
          }
    post {
        always {
            archiveArtifacts artifacts: 'build/libs/**/*.jar', fingerprint: true
            junit 'build/reports/**/*.xml'
        }
    }
    stage ('sonar scan') {
       steps {
         withSonarQubeEnv('sonarqube') { 
           sh 'mvn sonar:sonar'
       }
     }  
    }
}
}
